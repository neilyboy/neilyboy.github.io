<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFL Game Picks Manager</title>
    <style>
        :root {
            --primary-color: #013369;
            --secondary-color: #D50A0A;
            --background-color: #f4f4f4;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            background-color: var(--background-color);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .btn {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }

        .btn:hover {
            opacity: 0.9;
        }

        .input-group {
            margin-bottom: 20px;
        }

        input, select {
            padding: 8px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .game-grid {
            display: grid;
            gap: 20px;
            margin: 20px 0;
        }

        .game-card {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 4px;
            background-color: white;
        }

        .team-logo {
            width: 50px;
            height: 50px;
            object-fit: contain;
        }

        .hidden {
            display: none;
        }

        .picks-summary {
            margin: 20px 0;
            padding: 20px;
            background-color: #f8f8f8;
            border-radius: 4px;
        }

        @media print {
            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>NFL Game Picks Manager</h1>
        
        <!-- Initial Choice Section -->
        <div id="initialChoice">
            <h2>Select Pick Type</h2>
            <button class="btn" onclick="showNewPicks()">New Picks</button>
            <button class="btn" onclick="showFileUpload()">Load Previous Picks</button>
        </div>

        <!-- New Picks Section -->
        <div id="newPicks" class="hidden">
            <div id="playerInput">
                <h2>Add Players</h2>
                <div class="input-group">
                    <input type="text" id="playerName" placeholder="Enter player name">
                    <button class="btn" onclick="addPlayer()">Add Player</button>
                </div>
                <div id="playerList"></div>
                <button class="btn" onclick="showWeekSelect()">Next</button>
            </div>

            <div id="weekSelect" class="hidden">
                <h2>Select Week</h2>
                <select id="weekDropdown" onchange="loadGames()">
                    <!-- Week options will be populated here -->
                </select>
            </div>

            <div id="gamesPicks" class="hidden">
                <h2>Make Picks</h2>
                <div id="gamesGrid" class="game-grid"></div>
                <button class="btn" onclick="submitPicks()">Submit Picks</button>
            </div>
        </div>

        <!-- Load Previous Picks Section -->
        <div id="loadPicks" class="hidden">
            <h2>Load Previous Picks</h2>
            <input type="file" id="fileUpload" accept=".json" onchange="loadPicksFile(this)">
            <div id="results"></div>
        </div>
    </div>

    <script>
        let players = [];
        let currentWeek = '';
        let games = [];
        let picks = {};

        // Populate week dropdown with NFL schedule
        function populateWeekDropdown() {
            const weekOptions = [
                {value: 'PRE0', text: 'HALL OF FAME'},
                {value: 'PRE1', text: 'PRESEASON WEEK 1'},
                {value: 'PRE2', text: 'PRESEASON WEEK 2'},
                {value: 'PRE3', text: 'PRESEASON WEEK 3'},
                {value: 'REG1', text: 'WEEK 1'},
                {value: 'REG2', text: 'WEEK 2'},
                {value: 'REG3', text: 'WEEK 3'},
                {value: 'REG4', text: 'WEEK 4'},
                {value: 'REG5', text: 'WEEK 5'},
                {value: 'REG6', text: 'WEEK 6'},
                {value: 'REG7', text: 'WEEK 7'},
                {value: 'REG8', text: 'WEEK 8'},
                {value: 'REG9', text: 'WEEK 9'},
                {value: 'REG10', text: 'WEEK 10'},
                {value: 'REG11', text: 'WEEK 11'},
                {value: 'REG12', text: 'WEEK 12'},
                {value: 'REG13', text: 'WEEK 13'},
                {value: 'REG14', text: 'WEEK 14'},
                {value: 'REG15', text: 'WEEK 15'},
                {value: 'REG16', text: 'WEEK 16'},
                {value: 'REG17', text: 'WEEK 17'},
                {value: 'REG18', text: 'WEEK 18'}
            ];

            const dropdown = document.getElementById('weekDropdown');
            weekOptions.forEach(week => {
                const option = document.createElement('option');
                option.value = week.value;
                option.textContent = week.text;
                dropdown.appendChild(option);
            });
        }

        // Mock game data (in real app, this would come from NFL.com scraping)
        const mockGames = {
            'REG8': [
                {
                    homeTeam: { name: 'Buffalo Bills', logo: 'https://static.www.nfl.com/league/api/clubs/logos/BUF.svg' },
                    awayTeam: { name: 'Tampa Bay Buccaneers', logo: 'https://static.www.nfl.com/league/api/clubs/logos/TB.svg' }
                },
                {
                    homeTeam: { name: 'Dallas Cowboys', logo: 'https://static.www.nfl.com/league/api/clubs/logos/DAL.svg' },
                    awayTeam: { name: 'Los Angeles Rams', logo: 'https://static.www.nfl.com/league/api/clubs/logos/LA.svg' }
                }
            ]
        };

        function showNewPicks() {
            document.getElementById('initialChoice').classList.add('hidden');
            document.getElementById('newPicks').classList.remove('hidden');
            populateWeekDropdown();
        }

        function showFileUpload() {
            document.getElementById('initialChoice').classList.add('hidden');
            document.getElementById('loadPicks').classList.remove('hidden');
        }

        function addPlayer() {
            const playerName = document.getElementById('playerName').value.trim();
            if (playerName) {
                players.push(playerName);
                updatePlayerList();
                document.getElementById('playerName').value = '';
            }
        }

        function updatePlayerList() {
            const playerList = document.getElementById('playerList');
            playerList.innerHTML = '<h3>Players:</h3>' + 
                players.map(player => `<div>${player}</div>`).join('');
        }

        function showWeekSelect() {
            if (players.length > 0) {
                document.getElementById('playerInput').classList.add('hidden');
                document.getElementById('weekSelect').classList.remove('hidden');
            }
        }

        function loadGames() {
            currentWeek = document.getElementById('weekDropdown').value;
            games = mockGames[currentWeek] || [];
            displayGames();
            document.getElementById('gamesPicks').classList.remove('hidden');
        }

        function displayGames() {
            const gamesGrid = document.getElementById('gamesGrid');
            gamesGrid.innerHTML = '';

            games.forEach((game, gameIndex) => {
                const gameCard = document.createElement('div');
                gameCard.className = 'game-card';
                
                let gameHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div style="text-align: center;">
                            <img src="${game.awayTeam.logo}" alt="${game.awayTeam.name}" class="team-logo">
                            <div>${game.awayTeam.name}</div>
                        </div>
                        <div style="font-size: 24px;">@</div>
                        <div style="text-align: center;">
                            <img src="${game.homeTeam.logo}" alt="${game.homeTeam.name}" class="team-logo">
                            <div>${game.homeTeam.name}</div>
                        </div>
                    </div>
                `;

                players.forEach(player => {
                    gameHTML += `
                        <div style="margin: 10px 0;">
                            <span>${player}'s Pick: </span>
                            <label>
                                <input type="radio" name="game${gameIndex}_${player}" value="${game.awayTeam.name}">
                                ${game.awayTeam.name}
                            </label>
                            <label>
                                <input type="radio" name="game${gameIndex}_${player}" value="${game.homeTeam.name}">
                                ${game.homeTeam.name}
                            </label>
                        </div>
                    `;
                });

                gameCard.innerHTML = gameHTML;
                gamesGrid.appendChild(gameCard);
            });
        }

        function submitPicks() {
            picks = {
                week: currentWeek,
                players: players,
                games: games,
                selections: {}
            };

            players.forEach(player => {
                picks.selections[player] = [];
                games.forEach((game, gameIndex) => {
                    const selection = document.querySelector(`input[name="game${gameIndex}_${player}"]:checked`)?.value;
                    picks.selections[player].push(selection || null);
                });
            });

            displayPicksSummary();
        }

        function displayPicksSummary() {
            const summary = document.createElement('div');
            summary.className = 'picks-summary';
            
            let summaryHTML = `
                <h2>Picks Summary - ${document.getElementById('weekDropdown').options[document.getElementById('weekDropdown').selectedIndex].text}</h2>
            `;

            players.forEach(player => {
                summaryHTML += `<h3>${player}'s Picks:</h3><ul>`;
                picks.selections[player].forEach((selection, index) => {
                    const game = games[index];
                    summaryHTML += `
                        <li>${game.awayTeam.name} @ ${game.homeTeam.name}: ${selection || 'No pick'}</li>
                    `;
                });
                summaryHTML += '</ul>';
            });

            summaryHTML += `
                <div class="no-print">
                    <button class="btn" onclick="window.print()">Print Summary</button>
                    <button class="btn" onclick="downloadPicks()">Download Picks</button>
                </div>
            `;

            summary.innerHTML = summaryHTML;
            document.getElementById('gamesPicks').innerHTML = '';
            document.getElementById('gamesPicks').appendChild(summary);
        }

        function downloadPicks() {
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(picks));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute("href", dataStr);
            downloadAnchorNode.setAttribute("download", `nfl_picks_${currentWeek}.json`);
            document.body.appendChild(downloadAnchorNode);
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
        }

        function loadPicksFile(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const loadedPicks = JSON.parse(e.target.result);
                    displayResults(loadedPicks);
                };
                reader.readAsText(file);
            }
        }

        function displayResults(loadedPicks) {
            // Mock results (in real app, would fetch actual game results)
            const mockResults = {
                'REG8': [
                    { winner: 'Buffalo Bills' },
                    { winner: 'Dallas Cowboys' }
                ]
            };

            const results = document.getElementById('results');
            const weekResults = mockResults[loadedPicks.week];
            
            let correctPicks = {};
            loadedPicks.players.forEach(player => {
                correctPicks[player] = 0;
                loadedPicks.selections[player].forEach((pick, index) => {
                    if (pick === weekResults[index].winner) {
                        correctPicks[player]++;
                    }
                });
            });

            let resultsHTML = `
                <h2>Results for ${loadedPicks.week}</h2>
                <div class="picks-summary">
            `;

            // Sort players by correct picks
            const sortedPlayers = Object.entries(correctPicks)
                .sort(([,a],[,b]) => b-a)
                .map(([player]) => player);

            sortedPlayers.forEach(player => {
                resultsHTML += `
                    <div>
                        <h3>${player}</h3>
                        <p>Correct Picks: ${correctPicks[player]} / ${weekResults.length}</p>
                    </div>
                `;
            });

            resultsHTML += `
                    <h3>Winner: ${sortedPlayers[0]}</h3>
                </div>
            `;

            results.innerHTML = resultsHTML;
        }
    </script>
</body>
</html>
